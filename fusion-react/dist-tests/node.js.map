{"version":3,"file":"node.js","sources":["../src/async/constants.js","../src/async/prepared.js","../src/async/dispatched.js","../src/async/utils/isReactCompositeComponent.js","../src/async/utils/isReactFunctionalComponent.js","../src/async/prepare.js","../src/async/split.js","../src/async/traverse-exclude.js","../src/async/prepare-provider.js","../src/async/middleware.js","../src/async/index.js","../src/injector.js","../src/server.js","../src/provider.js","../src/plugin.js","../src/hoc.js","../src/index.js","../src/__tests__/hoc.node.js","../src/__tests__/injector.node.js","../src/__tests__/plugin.js","../src/__tests__/render.js","../src/__tests__/server.node.js","../src/async/__tests__/__node__/prepare-render.node.js","../src/async/__tests__/__node__/prepare-context.node.js","../src/async/__tests__/__node__/split.node.js","../src/async/__tests__/__node__/context.node.js","../src/async/__tests__/index.node.js","../src/async/utils/__tests__/isReactCompositeComponent.node.js","../src/async/utils/__tests__/isReactFunctionalComponent.node.js"],"sourcesContent":["/** Copyright (c) 2018 Uber Technologies, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nexport const REACT_PREPARE = '@__REACT_PREPARE__@';\n","/** Copyright (c) 2018 Uber Technologies, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport * as React from 'react';\n\nimport {REACT_PREPARE} from './constants';\n\n// $FlowFixMe\nconst prepared = (sideEffect, opts = {}) => OriginalComponent => {\n  opts = Object.assign(\n    {\n      boundary: false,\n      defer: false,\n      componentDidMount: true,\n      componentWillReceiveProps: false,\n      componentDidUpdate: false,\n      contextTypes: {},\n      forceUpdate: false,\n    },\n    opts\n  );\n  const prep = {\n    prepare: (...args) => Promise.resolve(sideEffect(...args)),\n    defer: opts.defer,\n  };\n  // Disable eslint for deprecated componentWillReceiveProps\n  // eslint-disable-next-line react/no-deprecated\n  class PreparedComponent extends React.Component<*, *> {\n    // $FlowFixMe\n    constructor(props, context) {\n      super(props, context);\n      // $FlowFixMe\n      this[REACT_PREPARE] = prep;\n    }\n    componentDidMount() {\n      if (opts.componentDidMount) {\n        Promise.resolve(sideEffect(this.props, this.context)).then(() => {\n          if (opts.forceUpdate) {\n            this.forceUpdate();\n          }\n        });\n      }\n    }\n\n    // $FlowFixMe\n    UNSAFE_componentWillReceiveProps(nextProps, nextContext) {\n      if (opts.componentWillReceiveProps) {\n        sideEffect(nextProps, nextContext);\n      }\n    }\n\n    componentDidUpdate() {\n      if (opts.componentDidUpdate) {\n        sideEffect(this.props, this.context);\n      }\n    }\n\n    render() {\n      return <OriginalComponent {...this.props} />;\n    }\n  }\n\n  const displayName =\n    OriginalComponent.displayName || OriginalComponent.name || '';\n  PreparedComponent.contextTypes = opts.contextTypes;\n  PreparedComponent.displayName = `PreparedComponent(${displayName})`;\n\n  return PreparedComponent;\n};\n\n// $FlowFixMe\nfunction isPrepared(CustomComponent) {\n  return (\n    CustomComponent[REACT_PREPARE] &&\n    typeof CustomComponent[REACT_PREPARE].prepare === 'function'\n  );\n}\n\n// $FlowFixMe\nfunction getPrepare(CustomComponent) {\n  return CustomComponent[REACT_PREPARE] || {};\n}\n\nexport {isPrepared, getPrepare};\nexport default prepared;\n","/** Copyright (c) 2018 Uber Technologies, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport PropTypes from 'prop-types';\n\nimport prepared from './prepared';\n\nconst storeShape = PropTypes.shape({\n  dispatch: PropTypes.func.isRequired,\n});\n\n// $FlowFixMe\nconst dispatched = (prepareUsingDispatch, opts = {}) => OriginalComponent => {\n  const prepare = (props, context) => {\n    return prepareUsingDispatch(props, context.store.dispatch);\n  };\n  const contextTypes = Object.assign(\n    {},\n    opts && opts.contextTypes ? opts.contextTypes : {},\n    {store: storeShape}\n  );\n  const preparedOpts = Object.assign({}, opts, {contextTypes});\n  return prepared(prepare, preparedOpts)(OriginalComponent);\n};\n\nexport default dispatched;\n","/** Copyright (c) 2018 Uber Technologies, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nexport default function isReactCompositeComponent(type: mixed) {\n  if (\n    type != null &&\n    type instanceof Function &&\n    type.prototype != null &&\n    typeof type.prototype.render === 'function'\n  ) {\n    return true;\n  }\n  return false;\n}\n","/** Copyright (c) 2018 Uber Technologies, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nexport default function isReactFunctionalComponent(type: mixed) {\n  if (\n    type instanceof Function &&\n    (type.prototype == null || !type.prototype.render)\n  )\n    return true;\n  return false;\n}\n","/** Copyright (c) 2018 Uber Technologies, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport * as React from 'react';\nimport {\n  isFragment,\n  isContextConsumer,\n  isContextProvider,\n  isForwardRef,\n  isPortal,\n} from 'react-is';\n\nimport isReactCompositeComponent from './utils/isReactCompositeComponent';\nimport isReactFunctionalComponent from './utils/isReactFunctionalComponent';\nimport {isPrepared, getPrepare} from './prepared';\n\nfunction renderCompositeElementInstance(instance) {\n  const childContext = Object.assign(\n    {},\n    instance.context,\n    instance.getChildContext ? instance.getChildContext() : {}\n  );\n\n  if (instance.constructor && instance.constructor.getDerivedStateFromProps) {\n    instance.state = {\n      ...instance.state,\n      ...instance.constructor.getDerivedStateFromProps(\n        instance.props,\n        instance.state\n      ),\n    };\n  } else {\n    // see https://github.com/reactjs/react-lifecycles-compat/blob/0a02b805fcf119128d1a9244e71ea7077e2cdcc0/index.js#L114\n    if (instance.componentWillMount) {\n      instance.componentWillMount();\n    } else if (instance.UNSAFE_componentWillMount) {\n      instance.UNSAFE_componentWillMount();\n    }\n  }\n  const children = instance.render();\n  return [children, childContext];\n}\n\nfunction prepareComponentInstance(instance) {\n  if (!isPrepared(instance)) {\n    return Promise.resolve({});\n  }\n  const prepareConfig = getPrepare(instance);\n  // If the component is deferred, skip the prepare step\n  if (prepareConfig.defer) {\n    return Promise.resolve(prepareConfig);\n  }\n  // $FlowFixMe\n  return prepareConfig.prepare(instance.props, instance.context).then(() => {\n    return prepareConfig;\n  });\n}\n\nfunction prepareElement(element, context) {\n  if (element === null || typeof element !== 'object') {\n    return Promise.resolve([null, context]);\n  }\n  const {type, props} = element;\n  if (isContextConsumer(element)) {\n    return Promise.resolve([props.children(type._currentValue), context]);\n  }\n  if (isContextProvider(element)) {\n    type._context._currentValue = props.value;\n    return Promise.resolve([props.children, context]);\n  }\n  if (\n    typeof type === 'string' ||\n    isFragment(element) ||\n    isForwardRef(element)\n  ) {\n    return Promise.resolve([props.children, context]);\n  } else if (isReactFunctionalComponent(type)) {\n    return Promise.resolve([type(props, context), context]);\n  } else if (isReactCompositeComponent(type)) {\n    const CompositeComponent = type;\n    const instance = new CompositeComponent(props, context);\n    instance.props = props;\n    instance.context = context;\n    return prepareComponentInstance(instance).then(prepareConfig => {\n      // Stop traversing if the component is defer or boundary\n      if (prepareConfig.defer || prepareConfig.boundary) {\n        return Promise.resolve([null, context]);\n      }\n      return renderCompositeElementInstance(instance);\n    });\n  } else if (isPortal(element)) {\n    return Promise.resolve([element.children, context]);\n  } else {\n    throw new TypeError(\n      `Invalid React element type. Must be a string, a function or a subclass of React.Component. ` +\n        `This error happens if you write a React Component <Foo> where Foo is undefined. ` +\n        `This can happen when mistakenly using a default import instead of a named import or vice-versa, ` +\n        `or if you are missing a peerDependency in your package.json and your package manager hoists an older version from an unrelated dependency \\n\\n` +\n        JSON.stringify(element, null, 2)\n    );\n  }\n}\n\nfunction _prepare(element, context) {\n  return prepareElement(element, context).then(([children, childContext]) => {\n    return Promise.all(\n      React.Children.toArray(children).map(child =>\n        _prepare(child, childContext)\n      )\n    );\n  });\n}\n\nfunction prepare(element: any, context: any = {}) {\n  context.__IS_PREPARE__ = true;\n  return _prepare(element, context).then(() => {\n    context.__IS_PREPARE__ = false;\n  });\n}\n\nexport default prepare;\n","/** Copyright (c) 2018 Uber Technologies, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport prepared from './prepared.js';\n\nconst CHUNKS_KEY = '__CHUNK_IDS';\n\nconst contextTypes = {\n  splitComponentLoaders: PropTypes.array.isRequired,\n};\n\nif (__NODE__) {\n  // $FlowFixMe\n  contextTypes.markAsCritical = PropTypes.func;\n}\n\n// $FlowFixMe\nexport default function withAsyncComponent({\n  defer,\n  load,\n  LoadingComponent,\n  ErrorComponent,\n}) {\n  let AsyncComponent = null;\n  let error = null;\n  let chunkIds = [];\n\n  function WithAsyncComponent(props) {\n    if (error) {\n      return <ErrorComponent error={error} />;\n    }\n    if (!AsyncComponent) {\n      return <LoadingComponent />;\n    }\n    return <AsyncComponent {...props} />;\n  }\n  return prepared(\n    (props, context) => {\n      if (AsyncComponent) {\n        if (__NODE__ && context.markAsCritical) {\n          chunkIds.forEach(chunkId => {\n            context.markAsCritical(chunkId);\n          });\n        }\n        return Promise.resolve(AsyncComponent);\n      }\n\n      let componentPromise;\n      try {\n        componentPromise = load();\n      } catch (e) {\n        componentPromise = Promise.reject(e);\n      }\n      // $FlowFixMe\n      chunkIds = componentPromise[CHUNKS_KEY] || [];\n\n      if (__NODE__ && context.markAsCritical) {\n        chunkIds.forEach(chunkId => {\n          context.markAsCritical(chunkId);\n        });\n      }\n\n      const loadPromises = [\n        componentPromise,\n        ...context.splitComponentLoaders.map(loader => loader(chunkIds)),\n      ];\n\n      return Promise.all(loadPromises)\n        .then(([asyncComponent]) => {\n          // Note: .default is toolchain specific, breaks w/ CommonJS exports\n          AsyncComponent = asyncComponent.default;\n          if (AsyncComponent === undefined) {\n            throw new Error('Bundle does not contain a default export');\n          }\n        })\n        .catch(err => {\n          error = err;\n          if (__BROWSER__)\n            setTimeout(() => {\n              throw err;\n            }); // log error\n        });\n    },\n    {defer, contextTypes, forceUpdate: true}\n  )(WithAsyncComponent);\n}\n","/** Copyright (c) 2018 Uber Technologies, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport prepared from './prepared.js';\n\n// Stops the traversal at this node. Useful for optimizing the prepare traversal\n// to visit the minimum number of nodes\nexport default prepared(Promise.resolve(), {\n  componentDidMount: false,\n  componentWillReceiveProps: false,\n  componentDidUpdate: false,\n  defer: true,\n});\n","/** Copyright (c) 2018 Uber Technologies, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\n\nclass PrepareProvider extends React.Component<*, *> {\n  constructor(props: any, context: any) {\n    super(props, context);\n    this.splitComponentLoaders = [];\n    this.markAsCritical = props.markAsCritical;\n  }\n\n  splitComponentLoaders: Array<any>;\n  markAsCritical: number => void;\n\n  getChildContext() {\n    return {\n      splitComponentLoaders: this.splitComponentLoaders,\n      markAsCritical: this.markAsCritical,\n    };\n  }\n  render() {\n    return React.Children.only(this.props.children);\n  }\n}\n\nPrepareProvider.childContextTypes = {\n  splitComponentLoaders: PropTypes.array.isRequired,\n  markAsCritical: PropTypes.func,\n};\n\nexport default PrepareProvider;\n","/** Copyright (c) 2018 Uber Technologies, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport * as React from 'react';\n\nimport type {Middleware} from 'fusion-core';\n\nimport PrepareProvider from './prepare-provider';\n\nconst middleware: Middleware = function(ctx, next) {\n  if (__DEV__) {\n    // eslint-disable-next-line no-console\n    console.warn('The {middleware} export from fusion-react is deprecated.');\n  }\n\n  if (__NODE__ && !ctx.element) {\n    return next();\n  }\n\n  const markAsCritical = __NODE__\n    ? chunkId => {\n        // Push to legacy context for backwards compat w/ legacy SSR template\n        ctx.preloadChunks.push(chunkId);\n      }\n    : noop;\n  ctx.element = (\n    <PrepareProvider markAsCritical={markAsCritical}>\n      {ctx.element}\n    </PrepareProvider>\n  );\n  return next();\n};\n\nexport default middleware;\n\nfunction noop() {}\n","/** Copyright (c) 2018 Uber Technologies, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport * as React from 'react';\n\nimport dispatched from './dispatched';\nimport prepare from './prepare';\nimport prepared from './prepared';\nimport split from './split';\nimport exclude from './traverse-exclude';\nimport middleware from './middleware';\n\nconst prepareTyped: (\n  element: React.Element<any>\n  // $FlowFixMe\n) => Promise<React.ComponentType<any>> = prepare;\n\nconst preparedTyped: (\n  sideEffect: (props: Object, context: Object) => Promise<any> | any,\n  opts?: {\n    defer?: boolean,\n    boundary?: boolean,\n    componentDidMount?: boolean,\n    componentWillReceiveProps?: boolean,\n    componentDidUpdate?: boolean,\n    forceUpdate?: boolean,\n    contextTypes?: Object,\n  }\n) => (\n  Component: React.ComponentType<any>\n) => React.ComponentType<any> = prepared;\n\nconst splitTyped: (opts: {\n  load: () => Promise<any>,\n  LoadingComponent: React.ComponentType<any>,\n  ErrorComponent: React.ComponentType<any>,\n}) => React.ComponentType<any> = split;\n\nconst excludeTyped: (\n  Component: React.ComponentType<any>\n) => React.ComponentType<any> = exclude;\n\nexport {\n  dispatched,\n  prepareTyped as prepare,\n  preparedTyped as prepared,\n  splitTyped as split,\n  excludeTyped as exclude,\n  middleware,\n};\n","/** Copyright (c) 2018 Uber Technologies, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport * as React from 'react';\nimport FusionApp, {createPlugin} from 'fusion-core';\nimport PropTypes from 'prop-types';\n\ntype Dependencies = {[string]: any};\ntype Services = {[string]: any};\ntype Props = {[string]: any};\ntype Mapper = Services => Props;\n\n// React.createContext ponyfill\nfunction createContext(value) {\n  if ('createContext' in React) {\n    return React.createContext<(Dependencies) => Services>(value);\n  }\n\n  const key = `_fusionContextPonyfill${Math.random()}`;\n\n  class Provider extends React.Component<*> {\n    getChildContext() {\n      return {[key]: this.props.value || value};\n    }\n\n    render() {\n      return this.props.children;\n    }\n  }\n\n  Provider.childContextTypes = {\n    [key]: PropTypes.any.isRequired,\n  };\n\n  function Consumer(props: *, context: *) {\n    return props.children(context[key]);\n  }\n\n  Consumer.contextTypes = {\n    [key]: PropTypes.any.isRequired,\n  };\n\n  return {\n    Provider,\n    Consumer,\n  };\n}\n\nlet InjectorContext;\n\nfunction getServices(app: FusionApp, deps: Dependencies): Services {\n  const services = {};\n\n  Object.entries(deps).forEach(([name, token]) => {\n    // To be addressed in a future Flow-focued PR.\n    // $FlowFixMe\n    services[name] = app.getService(token);\n  });\n\n  return services;\n}\n\n// istanbul ignore next\nfunction defaultInject(deps: Dependencies): Services {\n  return {};\n}\n\nfunction defaultMap(services: Services): Props {\n  return services;\n}\n\nexport function registerInjector(app: FusionApp) {\n  // Lazily create context for easier testing\n  InjectorContext = createContext(defaultInject);\n\n  function inject(deps: Dependencies): Services {\n    return getServices(app, deps);\n  }\n\n  function renderProvider(children) {\n    return (\n      <InjectorContext.Provider value={inject}>\n        {children}\n      </InjectorContext.Provider>\n    );\n  }\n\n  const injectorPlugin = createPlugin({\n    middleware: () => (ctx, next) => {\n      ctx.element = ctx.element && renderProvider(ctx.element);\n\n      return next();\n    },\n  });\n\n  app.register(injectorPlugin);\n}\n\nexport function withServices(\n  deps: Dependencies,\n  mapServicesToProps: Mapper = defaultMap\n) {\n  function resolve(inject, props) {\n    const services = inject(deps);\n    const serviceProps = mapServicesToProps(services);\n\n    return {\n      ...serviceProps,\n      ...props,\n    };\n  }\n\n  function renderConsumer(Component, props) {\n    return (\n      <InjectorContext.Consumer>\n        {inject => <Component {...resolve(inject, props)} />}\n      </InjectorContext.Consumer>\n    );\n  }\n\n  return (Component: React.ComponentType<*>) => {\n    return function WithServices(props: *) {\n      return renderConsumer(Component, props);\n    };\n  };\n}\n","/** Copyright (c) 2018 Uber Technologies, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\n/* eslint-env node */\nimport * as React from 'react';\nimport {renderToString} from 'react-dom/server';\n\nexport default (el: React.Element<*>) =>\n  `<div id='root'>${renderToString(el)}</div>`;\n","/** Copyright (c) 2018 Uber Technologies, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\n\nexport default {\n  create: (name: string) => {\n    class Provider extends React.Component<*> {\n      getChildContext() {\n        return {[name]: this.props.provides};\n      }\n      render() {\n        return React.Children.only(this.props.children);\n      }\n    }\n    Provider.childContextTypes = {\n      ...(Provider.childContextTypes || {}),\n      [name]: PropTypes.any.isRequired,\n    };\n    Provider.displayName =\n      name.replace(/^./, c => c.toUpperCase()) + 'Provider';\n\n    return Provider;\n  },\n};\n","/** Copyright (c) 2018 Uber Technologies, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport * as React from 'react';\n\nimport {createPlugin} from 'fusion-core';\nimport type {FusionPlugin, Middleware} from 'fusion-core';\n\nimport Provider from './provider';\n\n// eslint-disable-next-line\ntype FusionPluginNoHidden<TDeps, TService> = $Diff<\n  FusionPlugin<TDeps, TService>,\n  {__plugin__: boolean, stack: string}\n>;\n\nexport default {\n  create: <TDeps: *, TService: *>(\n    name: string,\n    // eslint-disable-next-line\n    plugin:\n      | FusionPluginNoHidden<TDeps, TService>\n      | FusionPlugin<TDeps, TService>,\n    provider?: React.ComponentType<*>\n  ): FusionPlugin<TDeps, TService> => {\n    if (plugin.__plugin__ === undefined) {\n      plugin = createPlugin(plugin);\n    }\n    if (!plugin.__plugin__) {\n      throw new Error(\n        'Provided plugin does not match FusionPlugin<TDeps, TService>'\n      );\n    }\n\n    let originalMiddleware = plugin.middleware;\n    const ProviderComponent = provider || Provider.create(name);\n    plugin.middleware = (deps: *, provides: *) => {\n      let nextMiddleware =\n        originalMiddleware && originalMiddleware(deps, provides);\n      const mw: Middleware = function(ctx, next) {\n        if (ctx.element) {\n          ctx.element = React.createElement(\n            ProviderComponent,\n            {provides, ctx},\n            ctx.element\n          );\n        }\n        if (nextMiddleware) {\n          return nextMiddleware(ctx, next);\n        }\n        return next();\n      };\n      return mw;\n    };\n    return plugin;\n  },\n};\n","/** Copyright (c) 2018 Uber Technologies, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport * as React from 'react';\n\nimport PropTypes from 'prop-types';\n\ntype ReactHOC = (React.ComponentType<*>) => React.ComponentType<*>;\nexport default {\n  create: (name: string, mapProvidesToProps?: Object => Object): ReactHOC => {\n    const mapProvides = mapProvidesToProps\n      ? mapProvidesToProps\n      : provides => ({[name]: provides});\n    return (Component: React.ComponentType<*>) => {\n      class HOC extends React.Component<*> {\n        provides: any;\n\n        constructor(props: *, ctx: *) {\n          super(props, ctx);\n          this.provides = ctx[name];\n        }\n        render() {\n          const props = {...this.props, ...mapProvides(this.provides)};\n          return React.createElement(Component, props);\n        }\n      }\n      const displayName =\n        Component.displayName || Component.name || 'Anonymous';\n      HOC.displayName =\n        'With' +\n        name.replace(/^./, c => c.toUpperCase()) +\n        '(' +\n        displayName +\n        ')';\n      HOC.contextTypes = {\n        [name]: PropTypes.any.isRequired,\n      };\n      return HOC;\n    };\n  },\n};\n","/** Copyright (c) 2018 Uber Technologies, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\n/* eslint-env browser */\nimport * as React from 'react';\n\nimport FusionApp, {createPlugin, CriticalChunkIdsToken} from 'fusion-core';\nimport {prepare} from './async/index.js';\nimport PrepareProvider from './async/prepare-provider';\nimport {registerInjector, withServices} from './injector.js';\n\nimport serverRender from './server';\nimport clientRender from './client';\n\nimport ProviderPlugin from './plugin';\nimport ProvidedHOC from './hoc';\nimport Provider from './provider';\n\ndeclare var __NODE__: Boolean;\n\nexport default class App extends FusionApp {\n  constructor(root: React.Element<*>, render: ?(React.Element<*>) => any) {\n    if (!React.isValidElement(root))\n      throw new Error(\n        'Invalid React element. Ensure your root element is a React.Element (e.g. <Foo />) and not a React.Component (e.g. Foo)'\n      );\n    const renderer = createPlugin({\n      deps: {\n        criticalChunkIds: CriticalChunkIdsToken.optional,\n      },\n      provides() {\n        return (el: React.Element<*>) => {\n          return prepare(el).then(() => {\n            if (render) {\n              return render(el);\n            }\n            return __NODE__ ? serverRender(el) : clientRender(el);\n          });\n        };\n      },\n      middleware({criticalChunkIds}) {\n        return (ctx, next) => {\n          if (__NODE__ && !ctx.element) {\n            return next();\n          }\n\n          const markAsCritical = __NODE__\n            ? chunkId => {\n                // Push to legacy context for backwards compat w/ legacy SSR template\n                ctx.preloadChunks.push(chunkId);\n\n                // Also use new service if registered\n                if (criticalChunkIds) {\n                  let chunkIds = criticalChunkIds.from(ctx);\n                  chunkIds.add(chunkId);\n                }\n              }\n            : noop;\n          ctx.element = (\n            <PrepareProvider markAsCritical={markAsCritical}>\n              {ctx.element}\n            </PrepareProvider>\n          );\n          return next();\n        };\n      },\n    });\n    super(root, renderer);\n    registerInjector(this);\n  }\n}\n\nexport {ProviderPlugin, ProvidedHOC, Provider, withServices};\n\nfunction noop() {}\n\nexport * from './async/index.js';\n","/** Copyright (c) 2018 Uber Technologies, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport tape from 'tape-cup';\nimport * as React from 'react';\nimport {createPlugin} from 'fusion-core';\nimport {getSimulator} from 'fusion-test-utils';\nimport PropTypes from 'prop-types';\nimport App from '../index';\nimport hoc from '../hoc';\nimport plugin from '../plugin';\n\ntape('hoc', async t => {\n  const withTest = hoc.create('test');\n  const testProvides = {hello: 'world'};\n  let didRender = false;\n  function TestComponent(props) {\n    didRender = true;\n    t.deepLooseEqual(props.test, testProvides);\n    t.notok(props.ctx, 'does not pass ctx through by default');\n    return React.createElement('div', null, 'hello');\n  }\n  const testPlugin = plugin.create(\n    'test',\n    createPlugin({provides: () => testProvides})\n  );\n  const element = React.createElement(withTest(TestComponent));\n  const app = new App(element);\n  app.register(testPlugin);\n  const sim = getSimulator(app);\n  const ctx = await sim.render('/');\n  t.ok(typeof ctx.body === 'string' && ctx.body.includes('hello'));\n  t.ok(didRender);\n  t.end();\n});\n\ntape('hoc with mapProvidesToProps', async t => {\n  const withTest = hoc.create('test', provides => {\n    return {mapped: provides};\n  });\n\n  const testProvides = {hello: 'world'};\n  let didRender = false;\n  function TestComponent(props) {\n    didRender = true;\n    t.deepLooseEqual(props.mapped, testProvides);\n    return React.createElement('div', null, 'hello');\n  }\n\n  const testPlugin = plugin.create(\n    'test',\n    createPlugin({provides: () => testProvides})\n  );\n  const element = React.createElement(withTest(TestComponent));\n  const app = new App(element);\n  app.register(testPlugin);\n  const sim = getSimulator(app);\n  const ctx = await sim.render('/');\n  t.ok(typeof ctx.body === 'string' && ctx.body.includes('hello'));\n  t.ok(didRender);\n  t.end();\n});\n\ntape('hoc with custom provider', async t => {\n  const withTest = hoc.create('test');\n\n  const testProvides = {hello: 'world'};\n  let didRender = false;\n  let didUseCustomProvider = false;\n  function TestComponent(props) {\n    didRender = true;\n    t.deepLooseEqual(props.test, testProvides);\n    return React.createElement('div', null, 'hello');\n  }\n  class CustomProvider extends React.Component<*> {\n    getChildContext() {\n      return {test: this.props.provides};\n    }\n    render() {\n      didUseCustomProvider = true;\n      t.ok(this.props.ctx, 'passes ctx through');\n      return React.Children.only(this.props.children);\n    }\n  }\n  CustomProvider.childContextTypes = {\n    test: PropTypes.any.isRequired,\n  };\n\n  const testPlugin = plugin.create(\n    'test',\n    createPlugin({provides: () => testProvides}),\n    CustomProvider\n  );\n  const element = React.createElement(withTest(TestComponent));\n  const app = new App(element);\n  app.register(testPlugin);\n  const sim = getSimulator(app);\n  const ctx = await sim.render('/');\n  t.ok(typeof ctx.body === 'string' && ctx.body.includes('hello'));\n  t.ok(didRender);\n  t.ok(didUseCustomProvider);\n  t.end();\n});\n","/** Copyright (c) 2018 Uber Technologies, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport tape from 'tape-cup';\nimport * as React from 'react';\nimport {createPlugin, createToken} from 'fusion-core';\nimport {getSimulator} from 'fusion-test-utils';\nimport App, {withServices} from '../index';\n\nimport type {Context} from 'fusion-core';\n\nasync function injectServices(t) {\n  const HelloToken = createToken('hola');\n  const HelloPlugin = createPlugin({\n    provides() {\n      return 'world';\n    },\n  });\n\n  const GoodbyeToken = createToken('adios');\n  const GoodbyePlugin = createPlugin({\n    provides() {\n      return 'moon';\n    },\n  });\n\n  function TestComponent({hi, bye}) {\n    t.equal(hi, 'world');\n    t.equal(bye, 'moon');\n\n    return (\n      <div>\n        {hi} {bye}\n      </div>\n    );\n  }\n\n  const TestComponentContainer = withServices({\n    hi: HelloToken,\n    bye: GoodbyeToken,\n  })(TestComponent);\n\n  const element = React.createElement(TestComponentContainer);\n  const app = new App(element);\n\n  app.register(HelloToken, HelloPlugin);\n  app.register(GoodbyeToken, GoodbyePlugin);\n\n  const sim = getSimulator(app);\n  const {body}: Context = await sim.render('/');\n\n  t.ok(body && typeof body === 'string' && body.match(/\\bworld\\b.*\\bmoon\\b/));\n}\n\ntape('inject services', async t => {\n  await injectServices(t);\n\n  t.end();\n});\n\n// Can't overwrite React import due to * import.\n// Re-enable when we migrate to using fusion-cli to run tests.\n// tape('inject services (legacy)', async t => {\n//   const createContext = React.createContext;\n\n//   try {\n//     // $FlowFixMe\n//     React.createContext = undefined;\n\n//     await injectServices(t);\n//   } finally {\n//     // $FlowFixMe\n//     React.createContext = createContext;\n//   }\n\n//   t.end();\n// });\n","/** Copyright (c) 2018 Uber Technologies, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport test from 'tape-cup';\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\n\nimport ReactPlugin from '../plugin';\n\ntest('.create works', t => {\n  class Foo {\n    foo() {}\n  }\n  const plugin = ReactPlugin.create('foo', {});\n  // $FlowFixMe\n  const middleware = plugin.middleware({}, new Foo());\n  const element = React.createElement('div');\n  const ctx = {element};\n  // $FlowFixMe\n  middleware(ctx, () => Promise.resolve()).then(() => {\n    t.notEquals(ctx.element, element, 'wraps provider');\n    // $FlowFixMe\n    t.equals(ctx.element.type.displayName, 'FooProvider');\n    // $FlowFixMe\n    t.equals(ctx.element.type.childContextTypes.foo, PropTypes.any.isRequired);\n    t.end();\n  });\n});\n\ntest('idempotency with wrapped middleware', async t => {\n  let called = 0;\n  const foo = 'foo';\n  const bar = 'bar';\n  const baz = 'baz';\n  const expectedDeps = [foo, bar];\n  const expectedSelf = [bar, baz];\n  const plugin = ReactPlugin.create('foo', {\n    middleware: (deps, self) => async () => {\n      t.equal(deps, expectedDeps.shift());\n      t.equal(self, expectedSelf.shift());\n      called += 1;\n    },\n  });\n  // $FlowFixMe\n  const middleware = plugin.middleware(foo, bar);\n  // $FlowFixMe\n  const middleware2 = plugin.middleware(bar, baz);\n  const element = React.createElement('div');\n  const ctx = {element};\n  // $FlowFixMe\n  middleware(ctx, () => Promise.resolve());\n  // $FlowFixMe\n  middleware2(ctx, () => Promise.resolve());\n  t.equals(called, 2, 'called two times');\n  t.end();\n});\n","/** Copyright (c) 2018 Uber Technologies, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport test from 'tape-cup';\nimport * as React from 'react';\nimport {getSimulator} from 'fusion-test-utils';\nimport App from '../index';\n\ntest('custom render function', async t => {\n  let didRender = false;\n  const app = new App(React.createElement('span', null, 'hello'), () => {\n    didRender = true;\n    return 10;\n  });\n  const simulator = getSimulator(app);\n  const ctx = await simulator.render('/');\n  t.ok(ctx.element);\n  t.equal(ctx.rendered, 10);\n  t.ok(didRender);\n  t.end();\n});\n","/** Copyright (c) 2018 Uber Technologies, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport test from 'tape-cup';\nimport * as React from 'react';\nimport {getSimulator} from 'fusion-test-utils';\nimport render from '../server';\nimport App from '../index';\n\ntest('renders', t => {\n  const rendered = render(React.createElement('span', null, 'hello'));\n  t.ok(/<span/.test(rendered), 'has right tag');\n  t.ok(/hello/.test(rendered), 'has right text');\n  t.end();\n});\n\ntest('app api', async t => {\n  t.equal(typeof App, 'function', 'exports a function');\n  try {\n    const app = new App(React.createElement('div', null, 'Hello World'));\n    const simulator = getSimulator(app);\n    const ctx = await simulator.render('/');\n    t.ok(ctx.rendered.includes('Hello World'));\n    t.ok(typeof ctx.body === 'string' && ctx.body.includes(ctx.rendered));\n  } catch (e) {\n    t.ifError(e);\n  } finally {\n    t.end();\n  }\n});\n\ntest('throw on non-element root', async t => {\n  t.throws(() => {\n    // $FlowFixMe\n    new App(function() {\n      return null;\n    });\n  }, 'Passing a component instead of an element throws');\n  t.end();\n});\n","/** Copyright (c) 2018 Uber Technologies, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\n/* eslint-disable react/no-multi-comp */\nimport tape from 'tape-cup';\nimport * as React from 'react';\nimport Enzyme, {shallow} from 'enzyme';\nimport Adapter from 'enzyme-adapter-react-16';\nimport {prepare, prepared} from '../../index.js';\n\nEnzyme.configure({adapter: new Adapter()});\n\ntape('Preparing a sync app', t => {\n  let numConstructors = 0;\n  let numRenders = 0;\n  let numChildRenders = 0;\n  class SimpleComponent extends React.Component<any> {\n    constructor(props, context) {\n      super(props, context);\n      t.equal(\n        context.__IS_PREPARE__,\n        true,\n        'sets __IS_PREPARE__ to true in context'\n      );\n      numConstructors++;\n    }\n    render() {\n      numRenders++;\n      return <SimplePresentational />;\n    }\n  }\n  function SimplePresentational() {\n    numChildRenders++;\n    return <div>Hello World</div>;\n  }\n  const app = <SimpleComponent />;\n  const p = prepare(app);\n  t.ok(p instanceof Promise, 'prepare returns a promise');\n  p.then(() => {\n    t.equal(numConstructors, 1, 'constructs SimpleComponent once');\n    t.equal(numRenders, 1, 'renders SimpleComponent once');\n    t.equal(numChildRenders, 1, 'renders SimplePresentational once');\n    t.end();\n  });\n});\n\ntape('Preparing a sync app with nested children', t => {\n  let numConstructors = 0;\n  let numRenders = 0;\n  let numChildRenders = 0;\n  class SimpleComponent extends React.Component<any> {\n    constructor(props, context) {\n      super(props, context);\n      t.equal(\n        context.__IS_PREPARE__,\n        true,\n        'sets __IS_PREPARE__ to true in context'\n      );\n      numConstructors++;\n    }\n    render() {\n      numRenders++;\n      return <div>{this.props.children}</div>;\n    }\n  }\n  function SimplePresentational() {\n    numChildRenders++;\n    return <div>Hello World</div>;\n  }\n  const app = (\n    <SimpleComponent>\n      <SimplePresentational />;\n    </SimpleComponent>\n  );\n  const p = prepare(app);\n  t.ok(p instanceof Promise, 'prepare returns a promise');\n  p.then(() => {\n    t.equal(numConstructors, 1, 'constructs SimpleComponent once');\n    t.equal(numRenders, 1, 'renders SimpleComponent once');\n    t.equal(numChildRenders, 1, 'renders SimplePresentational once');\n    t.end();\n  });\n});\n\ntape(\n  'Preparing a sync app with functional components referencing children',\n  t => {\n    let numRenders = 0;\n    let numChildRenders = 0;\n    let numPrepares = 0;\n    function SimpleComponent(props, context) {\n      t.equal(\n        context.__IS_PREPARE__,\n        true,\n        'sets __IS_PREPARE__ to true in context'\n      );\n      numRenders++;\n      return <div>{props.children}</div>;\n    }\n    function SimplePresentational() {\n      numChildRenders++;\n      return <div>Hello World</div>;\n    }\n    const AsyncChild = prepared(props => {\n      numPrepares++;\n      t.equal(\n        props.data,\n        'test',\n        'passes props through to prepared component correctly'\n      );\n      return Promise.resolve();\n    })(SimplePresentational);\n    const app = (\n      <SimpleComponent>\n        <AsyncChild data=\"test\" />\n      </SimpleComponent>\n    );\n    const p = prepare(app);\n    t.ok(p instanceof Promise, 'prepare returns a promise');\n    p.then(() => {\n      t.equal(numRenders, 1, 'renders SimpleComponent once');\n      t.equal(numPrepares, 1, 'runs prepare function once');\n      t.equal(numChildRenders, 1, 'renders SimplePresentational once');\n      t.end();\n    });\n  }\n);\n\ntape('Preparing an async app', t => {\n  let numConstructors = 0;\n  let numRenders = 0;\n  let numChildRenders = 0;\n  let numPrepares = 0;\n  class SimpleComponent extends React.Component<any> {\n    constructor(props, context) {\n      super(props, context);\n      t.equal(\n        context.__IS_PREPARE__,\n        true,\n        'sets __IS_PREPARE__ to true in context'\n      );\n      numConstructors++;\n    }\n    render() {\n      numRenders++;\n      return <SimplePresentational />;\n    }\n  }\n  function SimplePresentational() {\n    numChildRenders++;\n    return <div>Hello World</div>;\n  }\n  const AsyncParent = prepared(props => {\n    numPrepares++;\n    t.equal(\n      props.data,\n      'test',\n      'passes props through to prepared component correctly'\n    );\n    return Promise.resolve();\n  })(SimpleComponent);\n  const app = <AsyncParent data=\"test\" />;\n  const p = prepare(app);\n  t.ok(p instanceof Promise, 'prepare returns a promise');\n  p.then(() => {\n    t.equal(numPrepares, 1, 'runs the prepare function once');\n    t.equal(numConstructors, 1, 'constructs SimpleComponent once');\n    t.equal(numRenders, 1, 'renders SimpleComponent once');\n    t.equal(numChildRenders, 1, 'renders SimplePresentational once');\n    t.end();\n  });\n});\n\ntape('Preparing an async app with nested asyncs', t => {\n  let numConstructors = 0;\n  let numRenders = 0;\n  let numChildRenders = 0;\n  let numPrepares = 0;\n  class SimpleComponent extends React.Component<any> {\n    constructor(props, context) {\n      super(props, context);\n      t.equal(\n        context.__IS_PREPARE__,\n        true,\n        'sets __IS_PREPARE__ to true in context'\n      );\n      numConstructors++;\n    }\n    render() {\n      numRenders++;\n      return <div>{this.props.children}</div>;\n    }\n  }\n\n  function SimplePresentational() {\n    numChildRenders++;\n    return <div>Hello World</div>;\n  }\n  const AsyncParent = prepared(props => {\n    numPrepares++;\n    t.equal(\n      props.data,\n      'test',\n      'passes props through to prepared component correctly'\n    );\n    return Promise.resolve();\n  })(SimpleComponent);\n  const app = (\n    <AsyncParent data=\"test\">\n      <AsyncParent data=\"test\">\n        <SimplePresentational />\n      </AsyncParent>\n    </AsyncParent>\n  );\n\n  const p = prepare(app);\n  t.ok(p instanceof Promise, 'prepare returns a promise');\n  p.then(() => {\n    t.equal(numPrepares, 2, 'runs each prepare function once');\n    t.equal(\n      numConstructors,\n      2,\n      'constructs SimpleComponent once for each render'\n    );\n    t.equal(numRenders, 2, 'renders SimpleComponent twice');\n    t.equal(numChildRenders, 1, 'renders SimplePresentational once');\n    t.end();\n  });\n});\n\ntape('Preparing an app with sibling async components', t => {\n  let numConstructors = 0;\n  let numRenders = 0;\n  let numChildRenders = 0;\n  let numPrepares = 0;\n  class SimpleComponent extends React.Component<any> {\n    constructor(props, context) {\n      super(props, context);\n      t.equal(\n        context.__IS_PREPARE__,\n        true,\n        'sets __IS_PREPARE__ to true in context'\n      );\n      numConstructors++;\n    }\n    render() {\n      numRenders++;\n      return <div>{this.props.children}</div>;\n    }\n  }\n\n  function SimplePresentational() {\n    numChildRenders++;\n    return <div>Hello World</div>;\n  }\n  const AsyncParent = prepared(props => {\n    numPrepares++;\n    t.equal(\n      props.data,\n      'test',\n      'passes props through to prepared component correctly'\n    );\n    return;\n  })(SimpleComponent);\n  const app = (\n    <div>\n      <AsyncParent data=\"test\">\n        <SimplePresentational />\n      </AsyncParent>\n      <AsyncParent data=\"test\">\n        <SimplePresentational />\n      </AsyncParent>\n    </div>\n  );\n\n  const p = prepare(app);\n  t.ok(p instanceof Promise, 'prepare returns a promise');\n  p.then(() => {\n    t.equal(numPrepares, 2, 'runs each prepare function once');\n    t.equal(\n      numConstructors,\n      2,\n      'constructs SimpleComponent once for each render'\n    );\n    t.equal(numRenders, 2, 'renders SimpleComponent twice');\n    t.equal(\n      numChildRenders,\n      2,\n      'renders SimplePresentational once for each render'\n    );\n    t.end();\n  });\n});\n\ntape('Rendering a component triggers componentWillMount before render', t => {\n  const orderedMethodCalls = [];\n  const orderedChildMethodCalls = [];\n\n  // Disable eslint for deprecated componentWillMount\n  // eslint-disable-next-line react/no-deprecated\n  class SimpleComponent extends React.Component<any> {\n    UNSAFE_componentWillMount() {\n      orderedMethodCalls.push('componentWillMount');\n    }\n\n    render() {\n      orderedMethodCalls.push('render');\n      return <SimpleChildComponent />;\n    }\n  }\n\n  // Disable eslint for deprecated componentWillMount\n  // eslint-disable-next-line react/no-deprecated\n  class SimpleChildComponent extends React.Component<any> {\n    UNSAFE_componentWillMount() {\n      orderedChildMethodCalls.push('componentWillMount');\n    }\n\n    render() {\n      orderedChildMethodCalls.push('render');\n      return <div>Hello World</div>;\n    }\n  }\n\n  const app = <SimpleComponent />;\n  const p = prepare(app);\n  t.ok(p instanceof Promise, 'prepare returns a promise');\n  p.then(() => {\n    t.deepEqual(orderedMethodCalls, ['componentWillMount', 'render']);\n    t.deepEqual(orderedChildMethodCalls, ['componentWillMount', 'render']);\n    t.end();\n  });\n});\n\ntape('Preparing an async app with componentWillReceiveProps option', t => {\n  let numConstructors = 0;\n  let numRenders = 0;\n  let numChildRenders = 0;\n  let numPrepares = 0;\n  class SimpleComponent extends React.Component<any> {\n    constructor(props, context) {\n      super(props, context);\n      t.equal(\n        context.__IS_PREPARE__,\n        true,\n        'sets __IS_PREPARE__ to true in context'\n      );\n      numConstructors++;\n    }\n    render() {\n      numRenders++;\n      return <SimplePresentational />;\n    }\n  }\n  function SimplePresentational() {\n    numChildRenders++;\n    return <div>Hello World</div>;\n  }\n  const AsyncParent = prepared(\n    props => {\n      numPrepares++;\n      t.equal(\n        props.data,\n        'test',\n        'passes props through to prepared component correctly'\n      );\n      return Promise.resolve();\n    },\n    {\n      componentWillReceiveProps: true,\n    }\n  )(SimpleComponent);\n  const app = <AsyncParent data=\"test\" />;\n  const p = prepare(app);\n  t.ok(p instanceof Promise, 'prepare returns a promise');\n  p.then(() => {\n    t.equal(numPrepares, 1, 'runs the prepare function once');\n    t.equal(numConstructors, 1, 'constructs SimpleComponent once');\n    t.equal(numRenders, 1, 'renders SimpleComponent once');\n    t.equal(numChildRenders, 1, 'renders SimplePresentational once');\n    // triggers componentDidMount\n    const wrapper = shallow(app);\n    t.equal(numPrepares, 2, 'runs prepare on componentDidMount');\n    // triggers componentWillReceiveProps\n    wrapper.setProps({test: true});\n    t.equal(numPrepares, 3, 'runs prepare on componentWillReceiveProps');\n    t.end();\n  });\n});\n\ntape('Preparing an async app with componentDidUpdate option', t => {\n  let numConstructors = 0;\n  let numRenders = 0;\n  let numChildRenders = 0;\n  let numPrepares = 0;\n  class SimpleComponent extends React.Component<any> {\n    constructor(props, context) {\n      super(props, context);\n      t.equal(\n        context.__IS_PREPARE__,\n        true,\n        'sets __IS_PREPARE__ to true in context'\n      );\n      numConstructors++;\n    }\n    render() {\n      numRenders++;\n      return <SimplePresentational />;\n    }\n  }\n  function SimplePresentational() {\n    numChildRenders++;\n    return <div>Hello World</div>;\n  }\n  const AsyncParent = prepared(\n    props => {\n      numPrepares++;\n      t.equal(\n        props.data,\n        'test',\n        'passes props through to prepared component correctly'\n      );\n      return Promise.resolve();\n    },\n    {\n      componentDidUpdate: true,\n    }\n  )(SimpleComponent);\n  const app = <AsyncParent data=\"test\" />;\n  const p = prepare(app);\n  t.ok(p instanceof Promise, 'prepare returns a promise');\n  p.then(() => {\n    t.equal(numPrepares, 1, 'runs the prepare function once');\n    t.equal(numConstructors, 1, 'constructs SimpleComponent once');\n    t.equal(numRenders, 1, 'renders SimpleComponent once');\n    t.equal(numChildRenders, 1, 'renders SimplePresentational once');\n    // triggers componentDidMount\n    const wrapper = shallow(app);\n    t.equal(numPrepares, 2, 'runs prepare on componentDidMount');\n    // triggers componentDidUpdate\n    wrapper.setProps({test: true});\n    t.equal(numPrepares, 3, 'runs prepare on componentDidUpdate');\n    t.end();\n  });\n});\n\ntape('Preparing React.forwardRef', t => {\n  // $FlowFixMe\n  const Forwarded = React.forwardRef(function Inner(props, ref) {\n    return <div ref={ref}>{props.children}</div>;\n  });\n\n  const app = (\n    <Forwarded>\n      <span>1</span>\n      <span>2</span>\n    </Forwarded>\n  );\n  const p = prepare(app);\n  t.ok(p instanceof Promise, 'prepare returns a promise');\n  p.then(() => {\n    const wrapper = shallow(<div>{app}</div>);\n    t.equal(wrapper.find('span').length, 2, 'has two children');\n    t.end();\n  });\n});\n\ntape('Preparing React.forwardRef with async children', t => {\n  // $FlowFixMe\n  const Forwarded = React.forwardRef(function Inner(props, ref) {\n    return <div ref={ref}>{props.children}</div>;\n  });\n  let numChildRenders = 0;\n  let numPrepares = 0;\n  function SimplePresentational() {\n    numChildRenders++;\n    return <div>Hello World</div>;\n  }\n  const AsyncChild = prepared(props => {\n    numPrepares++;\n    t.equal(\n      props.data,\n      'test',\n      'passes props through to prepared component correctly'\n    );\n    return Promise.resolve();\n  })(SimplePresentational);\n  const app = (\n    <Forwarded>\n      <AsyncChild data=\"test\" />\n      <AsyncChild data=\"test\" />\n    </Forwarded>\n  );\n  const p = prepare(app);\n  t.ok(p instanceof Promise, 'prepare returns a promise');\n  p.then(() => {\n    t.equal(numPrepares, 2, 'runs prepare function twice');\n    t.equal(numChildRenders, 2, 'renders SimplePresentational twice');\n    t.end();\n  });\n});\n\ntape('Preparing a Fragment', t => {\n  const app = (\n    <React.Fragment>\n      <span>1</span>\n      <span>2</span>\n    </React.Fragment>\n  );\n  const p = prepare(app);\n  t.ok(p instanceof Promise, 'prepare returns a promise');\n  p.then(() => {\n    const wrapper = shallow(<div>{app}</div>);\n    t.equal(wrapper.find('span').length, 2, 'has two children');\n    t.end();\n  });\n});\n\ntape('Preparing a fragment with async children', t => {\n  let numChildRenders = 0;\n  let numPrepares = 0;\n  function SimplePresentational() {\n    numChildRenders++;\n    return <div>Hello World</div>;\n  }\n  const AsyncChild = prepared(props => {\n    numPrepares++;\n    t.equal(\n      props.data,\n      'test',\n      'passes props through to prepared component correctly'\n    );\n    return Promise.resolve();\n  })(SimplePresentational);\n  const app = (\n    // $FlowFixMe\n    <React.Fragment>\n      <AsyncChild data=\"test\" />\n      <AsyncChild data=\"test\" />\n    </React.Fragment>\n  );\n  const p = prepare(app);\n  t.ok(p instanceof Promise, 'prepare returns a promise');\n  p.then(() => {\n    t.equal(numPrepares, 2, 'runs prepare function twice');\n    t.equal(numChildRenders, 2, 'renders SimplePresentational twice');\n    t.end();\n  });\n});\n\ntape('Preparing React.createContext()', t => {\n  // $FlowFixMe\n  const {Provider, Consumer} = React.createContext('light');\n\n  const app = (\n    <Provider value=\"light\">\n      <span>1</span>\n      <Consumer>{() => <span>2</span>}</Consumer>\n    </Provider>\n  );\n  const p = prepare(app);\n  t.ok(p instanceof Promise, 'prepare returns a promise');\n  p.then(() => {\n    const wrapper = shallow(<div>{app}</div>);\n    t.equal(wrapper.find('span').length, 1, 'one span is rendered');\n    t.end();\n  });\n});\n\ntape('Preparing React.createContext() with async children', t => {\n  // $FlowFixMe\n  const {Provider, Consumer} = React.createContext('light');\n\n  let numChildRenders = 0;\n  let numPrepares = 0;\n  let numRenderPropsRenders = 0;\n  function SimplePresentational() {\n    numChildRenders++;\n\n    return (\n      <Consumer>\n        {theme => {\n          numRenderPropsRenders++;\n          t.equal(theme, 'dark', 'passes the context value correctly');\n          return <div>{theme}</div>;\n        }}\n      </Consumer>\n    );\n  }\n\n  const AsyncChild = prepared(props => {\n    numPrepares++;\n    t.equal(\n      props.data,\n      'test',\n      'passes props through to prepared component correctly'\n    );\n    return Promise.resolve();\n  })(SimplePresentational);\n\n  const app = (\n    <Provider value=\"dark\">\n      <AsyncChild data=\"test\" />\n      <AsyncChild data=\"test\" />\n    </Provider>\n  );\n  const p = prepare(app);\n  t.ok(p instanceof Promise, 'prepare returns a promise');\n  p.then(() => {\n    t.equal(numPrepares, 2, 'runs prepare function twice');\n    t.equal(numRenderPropsRenders, 2, 'prepares consumer render props');\n    t.equal(numChildRenders, 2, 'renders SimplePresentational twice');\n\n    t.equal(\n      shallow(<div>{app}</div>).html(),\n      '<div><div>dark</div><div>dark</div></div>',\n      'passes values via context'\n    );\n    t.end();\n  });\n});\n\ntape('Preparing React.createContext() with deep async children', t => {\n  // $FlowFixMe\n  const {Provider, Consumer} = React.createContext('light');\n\n  let numChildRenders = 0;\n  let numPrepares = 0;\n  let numRenderPropsRenders = 0;\n  function SimplePresentational() {\n    numChildRenders++;\n    return <div>Hello World</div>;\n  }\n\n  const AsyncChild = prepared(props => {\n    numPrepares++;\n    t.equal(\n      props.data,\n      'test',\n      'passes props through to prepared component correctly'\n    );\n    return Promise.resolve();\n  })(SimplePresentational);\n\n  const ConsumerComponent = () => {\n    return (\n      <Consumer>\n        {theme => {\n          numRenderPropsRenders++;\n          t.equal(theme, 'dark');\n          return <AsyncChild data=\"test\" />;\n        }}\n      </Consumer>\n    );\n  };\n\n  const app = (\n    <Provider value=\"dark\">\n      <ConsumerComponent />\n    </Provider>\n  );\n  const p = prepare(app);\n  t.ok(p instanceof Promise, 'prepare returns a promise');\n  p.then(() => {\n    t.equal(numPrepares, 1, 'runs prepare function');\n    t.equal(numChildRenders, 1, 'prepares SimplePresentational');\n    t.equal(numRenderPropsRenders, 1, 'runs render prop function');\n    t.end();\n  });\n});\n\ntape('Preparing React.createContext() using the default provider value', t => {\n  // $FlowFixMe\n  const {Consumer} = React.createContext('light');\n\n  let numChildRenders = 0;\n  let numPrepares = 0;\n  let numRenderPropsRenders = 0;\n  function SimplePresentational() {\n    numChildRenders++;\n    return <div>Hello World</div>;\n  }\n\n  const AsyncChild = prepared(props => {\n    numPrepares++;\n    t.equal(\n      props.data,\n      'test',\n      'passes props through to prepared component correctly'\n    );\n    return Promise.resolve();\n  })(SimplePresentational);\n\n  const ConsumerComponent = () => {\n    return (\n      <Consumer>\n        {theme => {\n          numRenderPropsRenders++;\n          t.equal(theme, 'light');\n          return <AsyncChild data=\"test\" />;\n        }}\n      </Consumer>\n    );\n  };\n\n  const app = <ConsumerComponent />;\n  const p = prepare(app);\n  t.ok(p instanceof Promise, 'prepare returns a promise');\n  p.then(() => {\n    t.equal(numPrepares, 1, 'runs prepare function');\n    t.equal(numChildRenders, 1, 'prepares SimplePresentational');\n    t.equal(numRenderPropsRenders, 1, 'runs render prop function');\n    t.end();\n  });\n});\n\ntape('Preparing a component using getDerivedStateFromProps', t => {\n  let numConstructors = 0;\n  let numRenders = 0;\n  let numChildRenders = 0;\n  let numPrepares = 0;\n  let numDerivedStateFromProps = 0;\n  let retainedState = false;\n  class SimpleComponent extends React.Component<any, any> {\n    constructor(props, context) {\n      super(props, context);\n      t.equal(\n        context.__IS_PREPARE__,\n        true,\n        'sets __IS_PREPARE__ to true in context'\n      );\n      numConstructors++;\n      this.state = {\n        firstRender: true,\n        originalState: 'should remain',\n      };\n    }\n\n    static getDerivedStateFromProps(props, {firstRender}) {\n      numDerivedStateFromProps++;\n      return {\n        firstRender: false,\n        someNewKey: [1, 2, 3],\n      };\n    }\n    // eslint-disable-next-line react/no-deprecated\n    componentWillMount() {\n      throw new Error('Should not be called when gDSFP is defined');\n    }\n\n    render() {\n      numRenders++;\n      retainedState = this.state.originalState === 'should remain';\n      return (\n        <div>\n          {this.state.someNewKey.map((item, key) => (\n            <div key={key} />\n          ))}\n          <SimplePresentational />\n        </div>\n      );\n    }\n  }\n  function SimplePresentational() {\n    numChildRenders++;\n    return <div>Hello World</div>;\n  }\n  const AsyncParent = prepared(\n    props => {\n      numPrepares++;\n      t.equal(\n        props.data,\n        'test',\n        'passes props through to prepared component correctly'\n      );\n      return Promise.resolve();\n    },\n    {\n      componentDidMount: false,\n      componentDidUpdate: false,\n    }\n  )(SimpleComponent);\n  const app = <AsyncParent data=\"test\" />;\n  const p = prepare(app);\n  t.ok(p instanceof Promise, 'prepare returns a promise');\n  p.then(() => {\n    t.equal(retainedState, true, 'gDSFP does not overwrite state');\n    t.equal(numPrepares, 1, 'runs the prepare function once');\n    t.equal(numConstructors, 1, 'constructs SimpleComponent once');\n    t.equal(numRenders, 1, 'renders SimpleComponent once');\n    t.equal(numChildRenders, 1, 'renders SimplePresentational once');\n    const wrapper = shallow(app);\n    // triggers getDerivedStateFromProps\n    // Enzyme does not yet support calling getDerivedStateFromProps after setProps\n    wrapper.setProps({test: true});\n    t.equal(\n      numDerivedStateFromProps,\n      1,\n      'runs prepare on getDerivedStateFromProps'\n    );\n    t.end();\n  });\n});\n","/** Copyright (c) 2018 Uber Technologies, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\n/* eslint-disable react/no-multi-comp */\nimport tape from 'tape-cup';\nimport * as React from 'react';\nimport {prepare} from '../../index.js';\n\ntape('Preparing a sync app passing through context', t => {\n  let numConstructors = 0;\n  let numRenders = 0;\n  let numChildRenders = 0;\n  class SimpleComponent extends React.Component<any, any> {\n    constructor(props, context) {\n      super(props, context);\n      t.equal(\n        context.__IS_PREPARE__,\n        true,\n        'sets __IS_PREPARE__ to true in context'\n      );\n      numConstructors++;\n    }\n    getChildContext() {\n      return {\n        test: 'data',\n      };\n    }\n    render() {\n      numRenders++;\n      return <SimplePresentational />;\n    }\n  }\n  function SimplePresentational(props, context) {\n    t.equal(context.test, 'data', 'handles child context correctly');\n    numChildRenders++;\n    return <div>Hello World</div>;\n  }\n  const app = <SimpleComponent />;\n  const p = prepare(app);\n  t.ok(p instanceof Promise, 'prepare returns a promise');\n  p.then(() => {\n    t.equal(numConstructors, 1, 'constructs SimpleComponent once');\n    t.equal(numRenders, 1, 'renders SimpleComponent once');\n    t.equal(numChildRenders, 1, 'renders SimplePresentational once');\n    t.end();\n  });\n});\n","/** Copyright (c) 2018 Uber Technologies, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\n/* eslint-disable react/no-multi-comp */\nimport tape from 'tape-cup';\nimport * as React from 'react';\nimport {renderToString} from 'react-dom/server';\nimport Provider from '../../prepare-provider';\nimport {prepare, split} from '../../index.js';\n\ntape('Preparing an app with an async component', async t => {\n  function DeferredComponent() {\n    return <div>Loaded</div>;\n  }\n  function LoadingComponent() {\n    return <div>Loading</div>;\n  }\n  function ErrorComponent() {\n    return <div>Failed</div>;\n  }\n\n  const ToTest = split({\n    defer: false,\n    load: () => Promise.resolve({default: DeferredComponent}),\n    LoadingComponent,\n    ErrorComponent,\n  });\n\n  const app = (\n    <Provider>\n      <ToTest />\n    </Provider>\n  );\n\n  t.ok(/Loading/.test(renderToString(app)), 'starts off loading');\n\n  await prepare(app);\n\n  t.ok(/Loaded/.test(renderToString(app)), 'ends loaded');\n  try {\n    await prepare(app);\n  } catch (e) {\n    t.ifError(e, 'should not error');\n  }\n  t.end();\n});\n\ntape('Preparing an app with an errored async component', async t => {\n  function LoadingComponent() {\n    return <div>Loading</div>;\n  }\n  function ErrorComponent() {\n    return <div>Failed</div>;\n  }\n\n  const ToTest = split({\n    defer: false,\n    load: () => Promise.reject(new Error('failed')),\n    LoadingComponent,\n    ErrorComponent,\n  });\n\n  const app = (\n    <Provider>\n      <ToTest />\n    </Provider>\n  );\n\n  t.ok(/Loading/.test(renderToString(app)), 'starts off loading');\n  await prepare(app);\n  t.ok(/Failed/.test(renderToString(app)), 'ends failed');\n  t.end();\n});\n","/** Copyright (c) 2018 Uber Technologies, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport tape from 'tape-cup';\nimport * as React from 'react';\nimport {renderToString} from 'react-dom/server';\nimport Provider from '../../prepare-provider';\nimport {prepare} from '../../index.js';\n\ntape('Handling context', async t => {\n  class Child extends React.Component<any, any> {\n    static contextTypes = {\n      field: () => {},\n    };\n\n    constructor(props: *) {\n      super(props);\n    }\n\n    render() {\n      return <h1>{this.context.field ? 'Yes' : 'No'}</h1>;\n    }\n  }\n\n  class Parent extends React.Component<any, any> {\n    static childContextTypes = {\n      field: () => {},\n    };\n\n    getChildContext() {\n      return {field: true};\n    }\n\n    render() {\n      return <Child />;\n    }\n  }\n\n  const ToTest = () => {\n    return (\n      <Parent>\n        <Child />\n      </Parent>\n    );\n  };\n\n  const app = (\n    <Provider>\n      <ToTest />\n    </Provider>\n  );\n  t.ok(/Yes/.test(renderToString(app)));\n  await prepare(app);\n  t.ok(/Yes/.test(renderToString(app)));\n  t.end();\n});\n","/** Copyright (c) 2018 Uber Technologies, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\n/* eslint-env node */\nimport './__node__/prepare-render.node.js';\nimport './__node__/prepare-context.node.js';\nimport './__node__/split.node.js';\nimport './__node__/context.node.js';\n\nprocess.on('unhandledRejection', e => {\n  throw e;\n});\n","/** Copyright (c) 2018 Uber Technologies, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport tape from 'tape-cup';\nimport isReactCompositeComponent from '../isReactCompositeComponent.js';\n\ntape('isReactCompositeComponent', async t => {\n  class Yes {\n    render() {}\n  }\n  class No {}\n  const fn = function() {};\n  const arrow = () => {};\n  t.ok(isReactCompositeComponent(Yes));\n  t.ok(!isReactCompositeComponent(No));\n  t.ok(!isReactCompositeComponent(fn));\n  t.ok(!isReactCompositeComponent(arrow));\n  t.ok(!isReactCompositeComponent(''));\n  t.ok(!isReactCompositeComponent(null));\n  t.ok(!isReactCompositeComponent(undefined));\n  t.end();\n});\n","/** Copyright (c) 2018 Uber Technologies, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport tape from 'tape-cup';\nimport isReactFunctionalComponent from '../isReactFunctionalComponent.js';\n\ntape('isReactFunctionalComponent', async t => {\n  class Comp {\n    render() {}\n  }\n  const fn = function() {};\n  const arrow = () => {};\n  t.ok(!isReactFunctionalComponent(Comp));\n  t.ok(isReactFunctionalComponent(fn));\n  t.ok(isReactFunctionalComponent(arrow));\n  t.ok(!isReactFunctionalComponent(''));\n  t.ok(!isReactFunctionalComponent(null));\n  t.ok(!isReactFunctionalComponent(undefined));\n  t.end();\n});\n"],"names":["REACT_PREPARE","prepared","sideEffect","opts","OriginalComponent","Object","assign","boundary","defer","componentDidMount","componentWillReceiveProps","componentDidUpdate","contextTypes","forceUpdate","prep","prepare","args","Promise","resolve","PreparedComponent","React","constructor","props","context","then","UNSAFE_componentWillReceiveProps","nextProps","nextContext","render","React.createElement","displayName","name","isPrepared","CustomComponent","getPrepare","storeShape","PropTypes","shape","dispatch","func","isRequired","isReactCompositeComponent","type","Function","prototype","isReactFunctionalComponent","renderCompositeElementInstance","instance","childContext","getChildContext","getDerivedStateFromProps","state","componentWillMount","UNSAFE_componentWillMount","children","prepareComponentInstance","prepareConfig","prepareElement","element","isContextConsumer","_currentValue","isContextProvider","_context","value","isFragment","isForwardRef","CompositeComponent","isPortal","TypeError","JSON","stringify","_prepare","all","toArray","map","child","__IS_PREPARE__","CHUNKS_KEY","splitComponentLoaders","array","markAsCritical","withAsyncComponent","load","LoadingComponent","ErrorComponent","AsyncComponent","error","chunkIds","WithAsyncComponent","forEach","chunkId","componentPromise","e","reject","loadPromises","loader","asyncComponent","default","undefined","Error","catch","err","PrepareProvider","only","childContextTypes","prepareTyped","preparedTyped","splitTyped","split","excludeTyped","exclude","createContext","key","Math","random","Provider","any","Consumer","InjectorContext","getServices","app","deps","services","entries","token","getService","defaultInject","defaultMap","registerInjector","inject","renderProvider","injectorPlugin","createPlugin","middleware","ctx","next","register","withServices","mapServicesToProps","serviceProps","renderConsumer","Component","WithServices","el","renderToString","create","provides","replace","c","toUpperCase","plugin","provider","__plugin__","originalMiddleware","ProviderComponent","nextMiddleware","mw","mapProvidesToProps","mapProvides","HOC","App","FusionApp","root","renderer","criticalChunkIds","CriticalChunkIdsToken","optional","serverRender","preloadChunks","push","from","add","tape","t","withTest","hoc","testProvides","hello","didRender","TestComponent","deepLooseEqual","test","notok","testPlugin","sim","getSimulator","ok","body","includes","end","mapped","didUseCustomProvider","CustomProvider","injectServices","HelloToken","createToken","HelloPlugin","GoodbyeToken","GoodbyePlugin","hi","bye","equal","TestComponentContainer","match","Foo","foo","ReactPlugin","notEquals","equals","called","bar","baz","expectedDeps","expectedSelf","self","shift","middleware2","simulator","rendered","ifError","throws","Enzyme","configure","adapter","Adapter","numConstructors","numRenders","numChildRenders","SimpleComponent","SimplePresentational","p","numPrepares","AsyncChild","data","AsyncParent","orderedMethodCalls","orderedChildMethodCalls","SimpleChildComponent","deepEqual","wrapper","shallow","setProps","Forwarded","Inner","ref","find","length","React.Fragment","numRenderPropsRenders","theme","html","ConsumerComponent","numDerivedStateFromProps","retainedState","firstRender","originalState","someNewKey","item","DeferredComponent","ToTest","Child","field","Parent","process","on","Yes","No","fn","arrow","Comp"],"mappings":"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"}